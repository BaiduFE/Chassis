<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>Zepto DOM unit tests</title>
<body>
    <div id="test"></div>
    <script src="../polyfill.js"></script>
  	<script src="../zepto.js"></script>
    <script src="../detect.js"></script>
    <script src="../event.js"></script>
    <script src="../ajax.js"></script>
    <script src="../../zepto.extend.js"></script>

    <script>
        alert(navigator.geolocation)

        if (navigator.geolocation) {
            alert(navigator.geolocation.getCurrentPosition)
            var timeoutVal = 10 * 1000 * 1000;
            navigator.geolocation.getCurrentPosition(
                    displayPosition,
                    displayError,
                    { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
            );
        }
        else {
            alert("Geolocation is not supported by this browser");
        }

        function displayPosition(position) {
            alert("Latitude: " + position.coords.latitude + ", Longitude: " + position.coords.longitude);
        }
        function displayError(){
            alert('error')
        }
        /*
        window.navigator.geolocation.getCurrentPosition(function(position){
            alert(position.coords.longitude + ' ' + position.coords.latitude)
        }, function(){
            alert('error')
        })

        var options = {
            enableHighAccuracy : true,
            timeout : 3000
        }
        $.location(function(rs){
            console.log(rs)
        }, function(){
            alert(arguments[0])
        }, options)
        */
    </script>
    <script>
        /*
        if (window.navigator.geolocation) {
            var options = {
                enableHighAccuracy: true
            };
            window.navigator.geolocation.getCurrentPosition(handleSuccess, handleError, options);
        } else {
            alert("浏览器不支持html5来获取地理位置信息");
        }

        function handleSuccess(position){
            // 获取到当前位置经纬度  本例中是chrome浏览器取到的是google地图中的经纬度
            var lng = position.coords.longitude;
            var lat = position.coords.latitude;
            // 调用百度地图api显示
           var map = new BMap.Map("map");
            var gc = new BMap.Geocoder();


            var ggPoint = new BMap.Point(lng, lat);
//            gc.getLocation(pt, function(rs){
//                console.log(rs)
//            });
            //var xyUrl = 'http://api.map.baidu.com/geocoder?location=' + lat + ',' + lng + '&output=json&key=26d4e41ca6e9f983c58f973aea761e23'
            // 将google地图中的经纬度转化为百度地图的经纬度
            BMap.Convertor.translate(ggPoint, 2, 1, function(point){
                console.log(point)
                BMap.Convertor.translate(point, 2, 2, function(point){
                    console.log(point)
                })
            });

        }

        function handleError(){}
        */

    </script>
</body>
</html>







<!--
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
        body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;}
        #l-map{height:100%;width:78%;float:left;border-right:2px solid #bcbcbc;}
        #r-result{height:100%;width:20%;float:left;}
    </style>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.4"></script>
    <script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/demo/convertor.js"></script>
    <title>GCJ-02转百度</title>
</head>
<body>
<div id="allmap"></div>
</body>
</html>
<script type="text/javascript">
    //谷歌坐标
    var x = 116.32715863448607;
    var y = 39.990912172420714;
    var ggPoint = new BMap.Point(x,y);

    //地图初始化
    var bm = new BMap.Map("allmap");
    bm.centerAndZoom(ggPoint, 15);
    bm.addControl(new BMap.NavigationControl());

    //添加谷歌marker和label
    var markergg = new BMap.Marker(ggPoint);
    bm.addOverlay(markergg); //添加谷歌marker
    var labelgg = new BMap.Label("我是谷歌标注哦",{offset:new BMap.Size(20,-10)});
    markergg.setLabel(labelgg); //添加谷歌label

    //坐标转换完之后的回调函数
    translateCallback = function (point){
        var marker = new BMap.Marker(point);
        bm.addOverlay(marker);
        var label = new BMap.Label("我是百度标注哦",{offset:new BMap.Size(20,-10)});
        marker.setLabel(label); //添加百度label
        bm.setCenter(point);
        alert(point.lng + "," + point.lat);
    }

    setTimeout(function(){
        BMap.Convertor.translate(ggPoint,2,translateCallback);     //GCJ-02坐标转成百度坐标
    }, 2000);
</script>
-->